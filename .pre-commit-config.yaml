repos:
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.4.0
  hooks:
  - id: trailing-whitespace
  - id: end-of-file-fixer
  - id: check-yaml
  - id: check-json
  - id: check-merge-conflict

- repo: https://github.com/psf/black
  rev: 23.3.0
  hooks:
  - id: black
    files: ^(common|tests)/.*\.py$

- repo: https://github.com/pycqa/isort
  rev: 5.12.0
  hooks:
  - id: isort
    files: ^(common|tests)/.*\.py$

- repo: https://github.com/pycqa/flake8
  rev: 6.0.0
  hooks:
  - id: flake8
    files: ^(common|tests)/.*\.py$
    args: ['--max-line-length=100', '--extend-ignore=E203,W503']

- repo: local
  hooks:
  - id: common-module-tests
    name: Run Common Module Tests
    entry: python common/tests/pytest_runner.py --coverage --target 75
    language: system
    files: ^common/.*\.py$
    pass_filenames: false
    stages: [commit]
    
  - id: common-test-structure
    name: Validate Test Structure
    entry: python common/tests/pytest_runner.py --check
    language: system
    files: ^common/tests/.*$
    pass_filenames: false
    stages: [commit]